<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>6.4</version>
    <template_groups>
        <template_group>
            <uuid>a571c0d144b14fd4a87a9d9b2aa9fcd6</uuid>
            <name>Templates/Applications</name>
        </template_group>
    </template_groups>
    <templates>
        <template>
            <uuid>3c344a0d616549dfbb201c803f09ec2d</uuid>
            <template>Tasmota</template>
            <name>Tasmota</name>
            <groups>
                <group>
                    <name>Templates/Applications</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>eaf30363f98142cb94817d6f4f393247</uuid>
                    <name>Energy</name>
                    <type>HTTP_AGENT</type>
                    <key>tasmota.energy</key>
                    <delay>10s</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get energy status info from tasmota device</description>
                    <url>http://{HOST.IP}/cm</url>
                    <query_fields>
                        <query_field>
                            <name>cmnd</name>
                            <value>status+10</value>
                        </query_field>
                    </query_fields>
                </item>
                <item>
                    <uuid>608b172d97ff4733a0109674b91ee0ca</uuid>
                    <name>Energy current</name>
                    <type>DEPENDENT</type>
                    <key>tasmota.energy.current</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <units>A</units>
                    <description>Actual current</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.StatusSNS.ENERGY.Current</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasmota.energy</key>
                    </master_item>
                </item>
                <item>
                    <uuid>63e44054ae314c29883296c859007d2b</uuid>
                    <name>Energy power</name>
                    <type>DEPENDENT</type>
                    <key>tasmota.energy.power</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <units>!W</units>
                    <description>Current power consumption</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.StatusSNS.ENERGY.Power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasmota.energy</key>
                    </master_item>
                </item>
                <item>
                    <uuid>afbede8603814d8fb27616fd3faa8b86</uuid>
                    <name>Energy voltage</name>
                    <type>DEPENDENT</type>
                    <key>tasmota.energy.voltage</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <units>V</units>
                    <description>Current voltage</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.StatusSNS.ENERGY.Voltage</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasmota.energy</key>
                    </master_item>
                </item>
                <item>
                    <uuid>2a44206314cc45d6bc85bda327a9379c</uuid>
                    <name>Status</name>
                    <type>HTTP_AGENT</type>
                    <key>tasmota.status</key>
                    <delay>10s</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get status info from tasmota device</description>
                    <url>http://{HOST.IP}/cm</url>
                    <query_fields>
                        <query_field>
                            <name>cmnd</name>
                            <value>status</value>
                        </query_field>
                    </query_fields>
                    <follow_redirects>NO</follow_redirects>
                </item>
                <item>
                    <uuid>29d8663113c6405cb2492a7bff4528aa</uuid>
                    <name>Switch</name>
                    <type>DEPENDENT</type>
                    <key>tasmota.status.power</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <description>State of the power switch.</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.Status.Power</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasmota.status</key>
                    </master_item>
                    <triggers>
                        <trigger>
                            <uuid>5219db0838c14380acfcde69ac3c5d09</uuid>
                            <expression>last(/Tasmota/tasmota.status.power)=0</expression>
                            <name>PowerState switched OFF</name>
                            <status>DISABLED</status>
                            <priority>HIGH</priority>
                            <description>PowerState has been switched to OFF by accident.
You should check the power state.</description>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>1cb1166b6c3f419c838e4d922f891344</uuid>
                    <name>Wifi</name>
                    <type>HTTP_AGENT</type>
                    <key>tasmota.wifi</key>
                    <delay>10s</delay>
                    <history>0</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>Get wifi info from tasmota device</description>
                    <url>http://{HOST.IP}/cm</url>
                    <query_fields>
                        <query_field>
                            <name>cmnd</name>
                            <value>status+11</value>
                        </query_field>
                    </query_fields>
                    <follow_redirects>NO</follow_redirects>
                </item>
                <item>
                    <uuid>33d4e978842e4d56ba5c8162b7ae6799</uuid>
                    <name>RSSI</name>
                    <type>DEPENDENT</type>
                    <key>tasmota.wifi.rssi</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <units>%</units>
                    <description>Current RSSI level</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.StatusSTS.Wifi.RSSI</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasmota.wifi</key>
                    </master_item>
                </item>
                <item>
                    <uuid>660f829d514d49ae99c15b53bfa10ba7</uuid>
                    <name>Signal</name>
                    <type>DEPENDENT</type>
                    <key>tasmota.wifi.signal</key>
                    <delay>0</delay>
                    <history>30d</history>
                    <value_type>FLOAT</value_type>
                    <units>dBm</units>
                    <description>Current signal quality</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.StatusSTS.Wifi.Signal</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasmota.wifi</key>
                    </master_item>
                </item>
            </items>
        </template>
    </templates>
    <graphs>
        <graph>
            <uuid>2c55f4c1ecc54cf5ab691b3d9cee4702</uuid>
            <name>Power consumption</name>
            <graph_items>
                <graph_item>
                    <drawtype>FILLED_REGION</drawtype>
                    <color>FF8000</color>
                    <calc_fnc>ALL</calc_fnc>
                    <item>
                        <host>Tasmota</host>
                        <key>tasmota.energy.power</key>
                    </item>
                </graph_item>
            </graph_items>
        </graph>
    </graphs>
</zabbix_export>
