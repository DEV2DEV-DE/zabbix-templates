<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>7.4</version>
    <template_groups>
        <template_group>
            <uuid>846977d1dfed4968bc5f8bdb363285bc</uuid>
            <name>Templates/Operating systems</name>
        </template_group>
    </template_groups>
    <templates>
        <template>
            <uuid>779585d774fe441a8ce8486f31ad55a3</uuid>
            <template>Unraid by GraphQL</template>
            <name>Unraid by GraphQL</name>
            <description>Template for the Unraid-API by DEV2DEV</description>
            <groups>
                <group>
                    <name>Templates/Operating systems</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>de07e23991034a3ea0bb9c4fa7d8f2bb</uuid>
                    <name>Info</name>
                    <type>SCRIPT</type>
                    <key>unraid.info</key>
                    <delay>1h</delay>
                    <history>0</history>
                    <value_type>TEXT</value_type>
                    <params>params = JSON.parse(value);
req = new HttpRequest();

req.addHeader('Content-Type: application/json');
req.addHeader('x-api-key: ' + params.APIKey);
var query = 'query {';
query += '    info {';
query += '        os {';
query += '            platform';
query += '            distro';
query += '            release';
query += '            uptime';
query += '        }';
query += '        cpu {';
query += '            manufacturer';
query += '            brand';
query += '            cores';
query += '            threads';
query += '        }';
query += '      baseboard {';
query += '        memMax';
query += '        memSlots';
query += '      }';
query += '    }';
query += '}';

const obj = {query: query, variables: {}};

resp = req.post('http://' + params.connect + '/graphql', JSON.stringify(obj));

return resp;</params>
                    <description>Retrieves basic informations from Unraid server.</description>
                    <parameters>
                        <parameter>
                            <name>APIKey</name>
                            <value>{$UNRAID_API_KEY}</value>
                        </parameter>
                        <parameter>
                            <name>connect</name>
                            <value>{HOST.CONN}</value>
                        </parameter>
                    </parameters>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>os</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5752ecb10f98439aa87834314c37241d</uuid>
                    <name>Baseboard</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.baseboard</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.data.info.baseboard</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>mainboard</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>feac170a67344e6ab96331c2ad81195b</uuid>
                    <name>MemMax</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.baseboard.memmax</key>
                    <trends>0</trends>
                    <units>B</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.memMax</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.baseboard</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>memory</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5b79256b8b134dceb89537b9d482c71f</uuid>
                    <name>MemSlots</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.baseboard.memslots</key>
                    <trends>0</trends>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.memSlots</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.baseboard</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>memory</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>773dbd1e4e004495b1351a6bc79404b6</uuid>
                    <name>Info.CPU</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.cpu</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.data.info.cpu</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>cpu</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>9be1ffe126184b5f9a2bedad91b75574</uuid>
                    <name>Brand</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.cpu.brand</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.brand</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.cpu</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>cpu</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>9771304d406849fdba4446682dd0393d</uuid>
                    <name>Cores</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.cpu.cores</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.cores</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.cpu</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>cpu</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>45a3c4c3f53b49dcba8de542d648eea1</uuid>
                    <name>Manufacturer</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.cpu.manufacturer</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.manufacturer</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.cpu</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>cpu</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>1f488c8825d04d59bd50f1bf07dcfece</uuid>
                    <name>Threads</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.cpu.threads</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.threads</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.cpu</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>cpu</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e6a658bb7f234546959e9c23f9fe4766</uuid>
                    <name>Info.OS</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.os</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.data.info.os</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>os</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>daac32ff641342f8bf37e6e8c2ea7faa</uuid>
                    <name>Distro</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.os.distro</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.distro</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.os</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>os</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>eec6cf6a7b3e4c81bbebaa0768e05205</uuid>
                    <name>Platform</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.os.platform</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.platform</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.os</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>os</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8d6ce44ea3a94eeb866f8ba704691454</uuid>
                    <name>Release</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.os.release</key>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.release</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.os</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>os</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>4ca2535f7078443ebabbc0b7e5e0f1cc</uuid>
                    <name>Uptime</name>
                    <type>DEPENDENT</type>
                    <key>unraid.info.os.uptime</key>
                    <trends>0</trends>
                    <units>unixtime</units>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.uptime</parameter>
                            </parameters>
                        </step>
                        <step>
                            <type>JAVASCRIPT</type>
                            <parameters>
                                <parameter>return new Date(value).getTime() / 1000;</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>unraid.info.os</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>component</tag>
                            <value>os</value>
                        </tag>
                        <tag>
                            <tag>template</tag>
                            <value>unraid</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$UNRAID_API_KEY}</macro>
                    <description>API-Key to access the server</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
